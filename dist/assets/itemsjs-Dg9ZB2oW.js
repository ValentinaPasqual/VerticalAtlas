var nr=typeof global=="object"&&global&&global.Object===Object&&global,zr=typeof self=="object"&&self&&self.Object===Object&&self,H=nr||zr||Function("return this")(),U=H.Symbol,or=Object.prototype,Pr=or.hasOwnProperty,Fr=or.toString,vt=U?U.toStringTag:void 0,Tr=Object.prototype.toString,Ir="[object Null]",Mr="[object Undefined]",ge=U?U.toStringTag:void 0;function pt(t){return t==null?t===void 0?Mr:Ir:ge&&ge in Object(t)?function(r){var e=Pr.call(r,vt),n=r[vt];try{r[vt]=void 0;var o=!0}catch{}var a=Fr.call(r);return o&&(e?r[vt]=n:delete r[vt]),a}(t):function(r){return Tr.call(r)}(t)}function X(t){return t!=null&&typeof t=="object"}var Nr="[object Symbol]";function ft(t){return typeof t=="symbol"||X(t)&&pt(t)==Nr}function ht(t,r){for(var e=-1,n=t==null?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}var $=Array.isArray,$r=1/0,ve=U?U.prototype:void 0,ye=ve?ve.toString:void 0;function ir(t){if(typeof t=="string")return t;if($(t))return ht(t,ir)+"";if(ft(t))return ye?ye.call(t):"";var r=t+"";return r=="0"&&1/t==-$r?"-0":r}function rt(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function Wt(t){return t}var Wr="[object AsyncFunction]",Cr="[object Function]",Dr="[object GeneratorFunction]",Vr="[object Proxy]";function sr(t){if(!rt(t))return!1;var r=pt(t);return r==Cr||r==Dr||r==Wr||r==Vr}var _e,Rt=H["__core-js_shared__"],me=(_e=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||""))?"Symbol(src)_1."+_e:"",Rr=Function.prototype.toString;function nt(t){if(t!=null){try{return Rr.call(t)}catch{}try{return t+""}catch{}}return""}var Ur=/^\[object .+?Constructor\]$/,qr=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ot(t,r){var e=function(n,o){return n==null?void 0:n[o]}(t,r);return function(n){return!(!rt(n)||(o=n,me&&me in o))&&(sr(n)?qr:Ur).test(nt(n));var o}(e)?e:void 0}var be,Ut,qt,Yt=ot(H,"WeakMap"),je=Object.create,Lr=function(){function t(){}return function(r){if(!rt(r))return{};if(je)return je(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),Br=Date.now,Jr=function(){try{var t=ot(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Mt=Jr,Hr=Mt?function(t,r){return Mt(t,"toString",{configurable:!0,enumerable:!1,value:(e=r,function(){return e}),writable:!0});var e}:Wt,Gr=(be=Hr,Ut=0,qt=0,function(){var t=Br(),r=16-(t-qt);if(qt=t,r>0){if(++Ut>=800)return arguments[0]}else Ut=0;return be.apply(void 0,arguments)});function Yr(t){return t!=t}function Kr(t,r){return!(t==null||!t.length)&&function(e,n,o){return n==n?function(a,c,f){for(var d=-1,p=a.length;++d<p;)if(a[d]===c)return d;return-1}(e,n):function(a,c,f,d){for(var p=a.length,l=-1;++l<p;)if(c(a[l],l,a))return l;return-1}(e,Yr)}(t,r)>-1}var Qr=9007199254740991,Xr=/^(?:0|[1-9]\d*)$/;function ie(t,r){var e=typeof t;return!!(r=r??Qr)&&(e=="number"||e!="symbol"&&Xr.test(t))&&t>-1&&t%1==0&&t<r}function se(t,r,e){r=="__proto__"&&Mt?Mt(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function Ct(t,r){return t===r||t!=t&&r!=r}var Zr=Object.prototype.hasOwnProperty;function ar(t,r,e){var n=t[r];Zr.call(t,r)&&Ct(n,e)&&(e!==void 0||r in t)||se(t,r,e)}function At(t,r,e,n){var o=!e;e||(e={});for(var a=-1,c=r.length;++a<c;){var f=r[a],d=void 0;d===void 0&&(d=t[f]),o?se(e,f,d):ar(e,f,d)}return e}var Se=Math.max;function cr(t,r){return Gr(function(e,n,o){return n=Se(n===void 0?e.length-1:n,0),function(){for(var a=arguments,c=-1,f=Se(a.length-n,0),d=Array(f);++c<f;)d[c]=a[n+c];c=-1;for(var p=Array(n+1);++c<n;)p[c]=a[c];return p[n]=o(d),function(l,y,g){switch(g.length){case 0:return l.call(y);case 1:return l.call(y,g[0]);case 2:return l.call(y,g[0],g[1]);case 3:return l.call(y,g[0],g[1],g[2])}return l.apply(y,g)}(e,this,p)}}(t,r,Wt),t+"")}var tn=9007199254740991;function ae(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tn}function wt(t){return t!=null&&ae(t.length)&&!sr(t)}function xe(t,r,e){if(!rt(e))return!1;var n=typeof r;return!!(n=="number"?wt(e)&&ie(r,e.length):n=="string"&&r in e)&&Ct(e[r],t)}var en=Object.prototype;function ce(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||en)}function Oe(t){return X(t)&&pt(t)=="[object Arguments]"}var ur=Object.prototype,rn=ur.hasOwnProperty,nn=ur.propertyIsEnumerable,ue=Oe(function(){return arguments}())?Oe:function(t){return X(t)&&rn.call(t,"callee")&&!nn.call(t,"callee")},lr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ke=lr&&typeof module=="object"&&module&&!module.nodeType&&module,Ae=ke&&ke.exports===lr?H.Buffer:void 0,Nt=(Ae?Ae.isBuffer:void 0)||function(){return!1},I={};function Dt(t){return function(r){return t(r)}}I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var hr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_t=hr&&typeof module=="object"&&module&&!module.nodeType&&module,Lt=_t&&_t.exports===hr&&nr.process,dt=function(){try{return _t&&_t.require&&_t.require("util").types||Lt&&Lt.binding&&Lt.binding("util")}catch{}}(),Ee=dt&&dt.isTypedArray,fr=Ee?Dt(Ee):function(t){return X(t)&&ae(t.length)&&!!I[pt(t)]},on=Object.prototype.hasOwnProperty;function dr(t,r){var e=$(t),n=!e&&ue(t),o=!e&&!n&&Nt(t),a=!e&&!n&&!o&&fr(t),c=e||n||o||a,f=c?function(l,y){for(var g=-1,_=Array(l);++g<l;)_[g]=y(g);return _}(t.length,String):[],d=f.length;for(var p in t)!r&&!on.call(t,p)||c&&(p=="length"||o&&(p=="offset"||p=="parent")||a&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||ie(p,d))||f.push(p);return f}function pr(t,r){return function(e){return t(r(e))}}var sn=pr(Object.keys,Object),an=Object.prototype.hasOwnProperty;function St(t){return wt(t)?dr(t):function(r){if(!ce(r))return sn(r);var e=[];for(var n in Object(r))an.call(r,n)&&n!="constructor"&&e.push(n);return e}(t)}var cn=Object.prototype.hasOwnProperty;function un(t){return wt(t)?dr(t,!0):function(r){if(!rt(r))return function(a){var c=[];if(a!=null)for(var f in Object(a))c.push(f);return c}(r);var e=ce(r),n=[];for(var o in r)(o!="constructor"||!e&&cn.call(r,o))&&n.push(o);return n}(t)}var ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hn=/^\w*$/;function Kt(t,r){if($(t))return!1;var e=typeof t;return!(e!="number"&&e!="symbol"&&e!="boolean"&&t!=null&&!ft(t))||hn.test(t)||!ln.test(t)||r!=null&&t in Object(r)}var yt=ot(Object,"create"),fn=Object.prototype.hasOwnProperty,dn=Object.prototype.hasOwnProperty;function et(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Et(t,r){for(var e=t.length;e--;)if(Ct(t[e][0],r))return e;return-1}et.prototype.clear=function(){this.__data__=yt?yt(null):{},this.size=0},et.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},et.prototype.get=function(t){var r=this.__data__;if(yt){var e=r[t];return e==="__lodash_hash_undefined__"?void 0:e}return fn.call(r,t)?r[t]:void 0},et.prototype.has=function(t){var r=this.__data__;return yt?r[t]!==void 0:dn.call(r,t)},et.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=yt&&r===void 0?"__lodash_hash_undefined__":r,this};var pn=Array.prototype.splice;function Q(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(t){var r=this.__data__,e=Et(r,t);return!(e<0||(e==r.length-1?r.pop():pn.call(r,e,1),--this.size,0))},Q.prototype.get=function(t){var r=this.__data__,e=Et(r,t);return e<0?void 0:r[e][1]},Q.prototype.has=function(t){return Et(this.__data__,t)>-1},Q.prototype.set=function(t,r){var e=this.__data__,n=Et(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var bt=ot(H,"Map");function zt(t,r){var e,n,o=t.__data__;return((n=typeof(e=r))=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null)?o[typeof r=="string"?"string":"hash"]:o.map}function K(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function le(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],a=e.cache;if(a.has(o))return a.get(o);var c=t.apply(this,n);return e.cache=a.set(o,c)||a,c};return e.cache=new(le.Cache||K),e}K.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(bt||Q),string:new et}},K.prototype.delete=function(t){var r=zt(this,t).delete(t);return this.size-=r?1:0,r},K.prototype.get=function(t){return zt(this,t).get(t)},K.prototype.has=function(t){return zt(this,t).has(t)},K.prototype.set=function(t,r){var e=zt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this},le.Cache=K;var Bt,Jt,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,vn=(Bt=le(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(wn,function(e,n,o,a){r.push(o?a.replace(gn,"$1"):n||e)}),r},function(t){return Jt.size===500&&Jt.clear(),t}),Jt=Bt.cache,Bt);function wr(t,r){return $(t)?t:Kt(t,r)?[t]:vn(function(e){return e==null?"":ir(e)}(t))}var yn=1/0;function Tt(t){if(typeof t=="string"||ft(t))return t;var r=t+"";return r=="0"&&1/t==-yn?"-0":r}function Qt(t,r){for(var e=0,n=(r=wr(r,t)).length;t!=null&&e<n;)t=t[Tt(r[e++])];return e&&e==n?t:void 0}function he(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}var ze=U?U.isConcatSpreadable:void 0;function _n(t){return $(t)||ue(t)||!!(ze&&t&&t[ze])}function mn(t,r,e,n,o){var a=-1,c=t.length;for(e||(e=_n),o||(o=[]);++a<c;){var f=t[a];e(f)?he(o,f):o[o.length]=f}return o}var gr=pr(Object.getPrototypeOf,Object);function J(t){var r=this.__data__=new Q(t);this.size=r.size}J.prototype.clear=function(){this.__data__=new Q,this.size=0},J.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},J.prototype.get=function(t){return this.__data__.get(t)},J.prototype.has=function(t){return this.__data__.has(t)},J.prototype.set=function(t,r){var e=this.__data__;if(e instanceof Q){var n=e.__data__;if(!bt||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new K(n)}return e.set(t,r),this.size=e.size,this};var vr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pe=vr&&typeof module=="object"&&module&&!module.nodeType&&module,Fe=Pe&&Pe.exports===vr?H.Buffer:void 0,Te=Fe?Fe.allocUnsafe:void 0;function yr(){return[]}var bn=Object.prototype.propertyIsEnumerable,Ie=Object.getOwnPropertySymbols,jn=Ie?function(t){return t==null?[]:(t=Object(t),function(r,e){for(var n=-1,o=r==null?0:r.length,a=0,c=[];++n<o;){var f=r[n];bn.call(t,f)&&(c[a++]=f)}return c}(Ie(t)))}:yr,fe=jn,Sn=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)he(r,fe(t)),t=gr(t);return r}:yr;function xn(t,r,e){var n=r(t);return $(t)?n:he(n,e(t))}function Xt(t){return xn(t,St,fe)}var Zt=ot(H,"DataView"),te=ot(H,"Promise"),ee=ot(H,"Set"),Me="[object Map]",Ne="[object Promise]",$e="[object Set]",We="[object WeakMap]",Ce="[object DataView]",On=nt(Zt),kn=nt(bt),An=nt(te),En=nt(ee),zn=nt(Yt),tt=pt;(Zt&&tt(new Zt(new ArrayBuffer(1)))!=Ce||bt&&tt(new bt)!=Me||te&&tt(te.resolve())!=Ne||ee&&tt(new ee)!=$e||Yt&&tt(new Yt)!=We)&&(tt=function(t){var r=pt(t),e=r=="[object Object]"?t.constructor:void 0,n=e?nt(e):"";if(n)switch(n){case On:return Ce;case kn:return Me;case An:return Ne;case En:return $e;case zn:return We}return r});var jt=tt,Pn=Object.prototype.hasOwnProperty,$t=H.Uint8Array;function Fn(t){var r=new t.constructor(t.byteLength);return new $t(r).set(new $t(t)),r}var Tn=/\w*$/,De=U?U.prototype:void 0,Ve=De?De.valueOf:void 0,In="[object Boolean]",Mn="[object Date]",Nn="[object Map]",$n="[object Number]",Wn="[object RegExp]",Cn="[object Set]",Dn="[object String]",Vn="[object Symbol]",Rn="[object ArrayBuffer]",Un="[object DataView]",qn="[object Float32Array]",Ln="[object Float64Array]",Bn="[object Int8Array]",Jn="[object Int16Array]",Hn="[object Int32Array]",Gn="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Kn="[object Uint16Array]",Qn="[object Uint32Array]",Re=dt&&dt.isMap,Xn=Re?Dt(Re):function(t){return X(t)&&jt(t)=="[object Map]"},Ue=dt&&dt.isSet,Zn=Ue?Dt(Ue):function(t){return X(t)&&jt(t)=="[object Set]"},to=1,eo=2,_r="[object Arguments]",mr="[object Function]",ro="[object GeneratorFunction]",br="[object Object]",T={};function It(t,r,e,n,o,a){var c,f=r&to,d=r&eo;if(c!==void 0)return c;if(!rt(t))return t;var p=$(t);if(p){if(c=function(h){var v=h.length,S=new h.constructor(v);return v&&typeof h[0]=="string"&&Pn.call(h,"index")&&(S.index=h.index,S.input=h.input),S}(t),!f)return function(h,v){var S=-1,x=h.length;for(v||(v=Array(x));++S<x;)v[S]=h[S];return v}(t,c)}else{var l=jt(t),y=l==mr||l==ro;if(Nt(t))return function(h,v){var S=h.length,x=Te?Te(S):new h.constructor(S);return h.copy(x),x}(t);if(l==br||l==_r||y&&!o){if(c=y?{}:function(h){return typeof h.constructor!="function"||ce(h)?{}:Lr(gr(h))}(t),!f)return d?function(h,v){return At(h,Sn(h),v)}(t,function(h,v){return h&&At(v,un(v),h)}(c,t)):function(h,v){return At(h,fe(h),v)}(t,function(h,v){return h&&At(v,St(v),h)}(c,t))}else{if(!T[l])return o?t:{};c=function(h,v,S){var x,M,W=h.constructor;switch(v){case Rn:return Fn(h);case In:case Mn:return new W(+h);case Un:return function(z,V){var O=z.buffer;return new z.constructor(O,z.byteOffset,z.byteLength)}(h);case qn:case Ln:case Bn:case Jn:case Hn:case Gn:case Yn:case Kn:case Qn:return function(z,V){var O=z.buffer;return new z.constructor(O,z.byteOffset,z.length)}(h);case Nn:return new W;case $n:case Dn:return new W(h);case Wn:return(M=new(x=h).constructor(x.source,Tn.exec(x))).lastIndex=x.lastIndex,M;case Cn:return new W;case Vn:return Ve?Object(Ve.call(h)):{}}}(t,l)}}a||(a=new J);var g=a.get(t);if(g)return g;a.set(t,c),Zn(t)?t.forEach(function(h){c.add(It(h,r,e,h,t,a))}):Xn(t)&&t.forEach(function(h,v){c.set(v,It(h,r,e,v,t,a))});var _=p?void 0:Xt(t);return function(h,v){for(var S=-1,x=h==null?0:h.length;++S<x&&v(h[S],S)!==!1;);}(_||t,function(h,v){_&&(h=t[v=h]),ar(c,v,It(h,r,e,v,t,a))}),c}function Ht(t){return It(t,4)}function mt(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new K;++r<e;)this.add(t[r])}function no(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function re(t,r){return t.has(r)}T[_r]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[br]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[mr]=T["[object WeakMap]"]=!1,mt.prototype.add=mt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},mt.prototype.has=function(t){return this.__data__.has(t)};var oo=1,io=2;function qe(t,r,e,n,o,a){var c=e&oo,f=t.length,d=r.length;if(f!=d&&!(c&&d>f))return!1;var p=a.get(t),l=a.get(r);if(p&&l)return p==r&&l==t;var y=-1,g=!0,_=e&io?new mt:void 0;for(a.set(t,r),a.set(r,t);++y<f;){var h=t[y],v=r[y];if(n)var S=c?n(v,h,y,r,t,a):n(h,v,y,t,r,a);if(S!==void 0){if(S)continue;g=!1;break}if(_){if(!no(r,function(x,M){if(!re(_,M)&&(h===x||o(h,x,e,n,a)))return _.push(M)})){g=!1;break}}else if(h!==v&&!o(h,v,e,n,a)){g=!1;break}}return a.delete(t),a.delete(r),g}function so(t){var r=-1,e=Array(t.size);return t.forEach(function(n,o){e[++r]=[o,n]}),e}function ao(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}var co=1,uo=2,lo="[object Boolean]",ho="[object Date]",fo="[object Error]",po="[object Map]",wo="[object Number]",go="[object RegExp]",vo="[object Set]",yo="[object String]",_o="[object Symbol]",mo="[object ArrayBuffer]",bo="[object DataView]",Le=U?U.prototype:void 0,Gt=Le?Le.valueOf:void 0,jo=1,So=Object.prototype.hasOwnProperty,xo=1,Be="[object Arguments]",Je="[object Array]",Pt="[object Object]",He=Object.prototype.hasOwnProperty;function ne(t,r,e,n,o){return t===r||(t==null||r==null||!X(t)&&!X(r)?t!=t&&r!=r:function(a,c,f,d,p,l){var y=$(a),g=$(c),_=y?Je:jt(a),h=g?Je:jt(c),v=(_=_==Be?Pt:_)==Pt,S=(h=h==Be?Pt:h)==Pt,x=_==h;if(x&&Nt(a)){if(!Nt(c))return!1;y=!0,v=!1}if(x&&!v)return l||(l=new J),y||fr(a)?qe(a,c,f,d,p,l):function(O,k,q,L,st,C,R){switch(q){case bo:if(O.byteLength!=k.byteLength||O.byteOffset!=k.byteOffset)return!1;O=O.buffer,k=k.buffer;case mo:return!(O.byteLength!=k.byteLength||!C(new $t(O),new $t(k)));case lo:case ho:case wo:return Ct(+O,+k);case fo:return O.name==k.name&&O.message==k.message;case go:case yo:return O==k+"";case po:var B=so;case vo:if(B||(B=ao),O.size!=k.size&&!(L&co))return!1;var G=R.get(O);if(G)return G==k;L|=uo,R.set(O,k);var Y=qe(B(O),B(k),L,st,C,R);return R.delete(O),Y;case _o:if(Gt)return Gt.call(O)==Gt.call(k)}return!1}(a,c,_,f,d,p,l);if(!(f&xo)){var M=v&&He.call(a,"__wrapped__"),W=S&&He.call(c,"__wrapped__");if(M||W){var z=M?a.value():a,V=W?c.value():c;return l||(l=new J),p(z,V,f,d,l)}}return!!x&&(l||(l=new J),function(O,k,q,L,st,C){var R=q&jo,B=Xt(O),G=B.length;if(G!=Xt(k).length&&!R)return!1;for(var Y=G;Y--;){var u=B[Y];if(!(R?u in k:So.call(k,u)))return!1}var i=C.get(O),s=C.get(k);if(i&&s)return i==k&&s==O;var w=!0;C.set(O,k),C.set(k,O);for(var m=R;++Y<G;){var b=O[u=B[Y]],j=k[u];if(L)var P=R?L(j,b,u,k,O,C):L(b,j,u,O,k,C);if(!(P===void 0?b===j||st(b,j,q,L,C):P)){w=!1;break}m||(m=u=="constructor")}if(w&&!m){var N=O.constructor,F=k.constructor;N==F||!("constructor"in O)||!("constructor"in k)||typeof N=="function"&&N instanceof N&&typeof F=="function"&&F instanceof F||(w=!1)}return C.delete(O),C.delete(k),w}(a,c,f,d,p,l))}(t,r,e,n,ne,o))}var Oo=1,ko=2;function Ge(t){return t==t&&!rt(t)}function Ye(t,r){return function(e){return e!=null&&e[t]===r&&(r!==void 0||t in Object(e))}}function Ao(t,r){return t!=null&&r in Object(t)}var Eo=1,zo=2;function it(t){return typeof t=="function"?t:t==null?Wt:typeof t=="object"?$(t)?function(a,c){return Kt(a)&&Ge(c)?Ye(Tt(a),c):function(f){var d=function(p,l,y){var g=p==null?void 0:Qt(p,l);return g===void 0?void 0:g}(f,a);return d===void 0&&d===c?function(p,l){return p!=null&&function(y,g,_){for(var h=-1,v=(g=wr(g,y)).length,S=!1;++h<v;){var x=Tt(g[h]);if(!(S=y!=null&&_(y,x)))break;y=y[x]}return S||++h!=v?S:!!(v=y==null?0:y.length)&&ae(v)&&ie(x,v)&&($(y)||ue(y))}(p,l,Ao)}(f,a):ne(c,d,Eo|zo)}}(t[0],t[1]):(o=function(a){for(var c=St(a),f=c.length;f--;){var d=c[f],p=a[d];c[f]=[d,p,Ge(p)]}return c}(n=t),o.length==1&&o[0][2]?Ye(o[0][0],o[0][1]):function(a){return a===n||function(c,f,d,p){var l=d.length,y=l;if(c==null)return!y;for(c=Object(c);l--;){var g=d[l];if(g[2]?g[1]!==c[g[0]]:!(g[0]in c))return!1}for(;++l<y;){var _=(g=d[l])[0],h=c[_],v=g[1];if(g[2]){if(h===void 0&&!(_ in c))return!1}else{var S=new J;if(!ne(v,h,Oo|ko,void 0,S))return!1}}return!0}(a,0,o)}):Kt(r=t)?(e=Tt(r),function(a){return a==null?void 0:a[e]}):function(a){return function(c){return Qt(c,a)}}(r);var r,e,n,o}var Po=function(t,r,e){for(var n=-1,o=Object(t),a=e(t),c=a.length;c--;){var f=a[++n];if(r(o[f],f,o)===!1)break}return t};function jr(t,r){return t&&Po(t,r,St)}var Ke,Fo=(Ke=jr,function(t,r){if(t==null)return t;if(!wt(t))return Ke(t,r);for(var e=t.length,n=-1,o=Object(t);++n<e&&r(o[n],n,o)!==!1;);return t});function Sr(t,r){var e=-1,n=wt(t)?Array(t.length):[];return Fo(t,function(o,a,c){n[++e]=r(o,a,c)}),n}function To(t,r){return t>r}var Io=Math.min;function Mo(t){return function(r){return X(r)&&wt(r)}(t)?t:[]}var No=cr(function(t){var r=ht(t,Mo);return r.length&&r[0]===t[0]?function(e,n,o){for(var a=Kr,c=e[0].length,f=e.length,d=f,p=Array(f),l=1/0,y=[];d--;){var g=e[d];l=Io(g.length,l),p[d]=c>=120&&g.length>=120?new mt(d&&g):void 0}g=e[0];var _=-1,h=p[0];t:for(;++_<c&&y.length<l;){var v=g[_],S=v;if(v=v!==0?v:0,!(h?re(h,S):a(y,S,o))){for(d=f;--d;){var x=p[d];if(!(x?re(x,S):a(e[d],S,o)))continue t}h&&h.push(S),y.push(v)}}return y}(r):[]}),$o=No;function Wo(t,r){return t<r}function E(t,r){var e={};return r=it(r),jr(t,function(n,o,a){se(e,o,r(n,o,a))}),e}function xr(t,r,e){for(var n=-1,o=t.length;++n<o;){var a=t[n],c=r(a);if(c!=null&&(f===void 0?c==c&&!ft(c):e(c,f)))var f=c,d=a}return d}function Co(t,r){return t&&t.length?xr(t,it(r),To):void 0}function Or(t,r){for(var e,n=-1,o=t.length;++n<o;){var a=r(t[n]);a!==void 0&&(e=e===void 0?a:e+a)}return e}function Do(t,r){return function(e,n){var o=e==null?0:e.length;return o?Or(e,n)/o:NaN}(t,it(r))}function Vo(t,r){if(t!==r){var e=t!==void 0,n=t===null,o=t==t,a=ft(t),c=r!==void 0,f=r===null,d=r==r,p=ft(r);if(!f&&!p&&!a&&t>r||a&&c&&d&&!f&&!p||n&&c&&d||!e&&d||!o)return 1;if(!n&&!a&&!p&&t<r||p&&e&&o&&!n&&!a||f&&e&&o||!c&&o||!d)return-1}return 0}function kr(t,r,e){r=r.length?ht(r,function(o){return $(o)?function(a){return Qt(a,o.length===1?o[0]:o)}:o}):[Wt];var n=-1;return r=ht(r,Dt(it)),function(o,a){var c=o.length;for(o.sort(function(f,d){return function(p,l,y){for(var g=-1,_=p.criteria,h=l.criteria,v=_.length,S=y.length;++g<v;){var x=Vo(_[g],h[g]);if(x)return g>=S?x:x*(y[g]=="desc"?-1:1)}return p.index-l.index}(f,d,e)});c--;)o[c]=o[c].value;return o}(Sr(t,function(o,a,c){return{criteria:ht(r,function(f){return f(o)}),index:++n,value:o}}))}function de(t,r,e,n){return t==null?[]:($(r)||(r=r==null?[]:[r]),$(e=e)||(e=e==null?[]:[e]),kr(t,r,e))}var Ro=cr(function(t,r){if(t==null)return[];var e=r.length;return e>1&&xe(t,r[0],r[1])?r=[]:e>2&&xe(r[0],r[1],r[2])&&(r=[r[0]]),kr(t,mn(r),[])});function Uo(t,r){return t&&t.length?Or(t,it(r)):0}function A(t){if(this.words=[],t)if(Symbol&&Symbol.iterator&&t[Symbol.iterator]!==void 0){const r=t[Symbol.iterator]();let e=r.next();for(;!e.done;)this.add(e.value),e=r.next()}else for(let r=0;r<t.length;r++)this.add(t[r])}A.fromWords=function(t){const r=Object.create(A.prototype);return r.words=t,r},A.prototype.add=function(t){this.resize(t),this.words[t>>>5]|=1<<t},A.prototype.flip=function(t){this.resize(t),this.words[t>>>5]^=1<<t},A.prototype.clear=function(){this.words.length=0},A.prototype.remove=function(t){this.resize(t),this.words[t>>>5]&=~(1<<t)},A.prototype.isEmpty=function(t){const r=this.words.length;for(let e=0;e<r;e++)if(this.words[e]!==0)return!1;return!0},A.prototype.has=function(t){return(this.words[t>>>5]&1<<t)!=0},A.prototype.checkedAdd=function(t){this.resize(t);const r=this.words[t>>>5],e=r|1<<t;return this.words[t>>>5]=e,(e^r)>>>t},A.prototype.trim=function(t){let r=this.words.length;for(;r>0&&this.words[r-1]===0;)r--;this.words.length=r},A.prototype.resize=function(t){const r=t+32>>>5;for(let e=this.words.length;e<r;e++)this.words[e]=0},A.prototype.hammingWeight=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},A.prototype.hammingWeight4=function(t,r,e,n){return 16843009*((t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)+(r=(r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)+(e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)+(n=(n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135))>>>24},A.prototype.size=function(){let t=0;const r=this.words.length,e=this.words;for(let n=0;n<r;n++)t+=this.hammingWeight(e[n]);return t},A.prototype.array=function(){const t=new Array(this.size());let r=0;const e=this.words.length;for(let n=0;n<e;++n){let o=this.words[n];for(;o!=0;){const a=o&-o;t[r++]=(n<<5)+this.hammingWeight(a-1|0),o^=a}}return t},A.prototype.forEach=function(t){const r=this.words.length;for(let e=0;e<r;++e){let n=this.words[e];for(;n!=0;){const o=n&-n;t((e<<5)+this.hammingWeight(o-1|0)),n^=o}}},A.prototype[Symbol.iterator]=function(){const t=this.words.length;let r=0,e=this.words[r],n=this.hammingWeight,o=this.words;return{[Symbol.iterator](){return this},next(){for(;r<t;){if(e!==0){const a=e&-e,c=(r<<5)+n(a-1|0);return e^=a,{done:!1,value:c}}r++,r<t&&(e=o[r])}return{done:!0,value:void 0}}}},A.prototype.clone=function(){const t=Object.create(A.prototype);return t.words=this.words.slice(),t},A.prototype.intersects=function(t){const r=Math.min(this.words.length,t.words.length);for(let e=0;e<r;++e)if(this.words[e]&t.words[e])return!0;return!1},A.prototype.intersection=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(;e+7<r;e+=8)this.words[e]&=t.words[e],this.words[e+1]&=t.words[e+1],this.words[e+2]&=t.words[e+2],this.words[e+3]&=t.words[e+3],this.words[e+4]&=t.words[e+4],this.words[e+5]&=t.words[e+5],this.words[e+6]&=t.words[e+6],this.words[e+7]&=t.words[e+7];for(;e<r;++e)this.words[e]&=t.words[e];const n=this.words.length;for(e=r;e<n;++e)this.words[e]=0;return this},A.prototype.intersection_size=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(let n=0;n<r;++n)e+=this.hammingWeight(this.words[n]&t.words[n]);return e},A.prototype.new_intersection=function(t){const r=Object.create(A.prototype),e=Math.min(this.words.length,t.words.length);r.words=new Array(e);let n=0;for(;n+7<e;n+=8)r.words[n]=this.words[n]&t.words[n],r.words[n+1]=this.words[n+1]&t.words[n+1],r.words[n+2]=this.words[n+2]&t.words[n+2],r.words[n+3]=this.words[n+3]&t.words[n+3],r.words[n+4]=this.words[n+4]&t.words[n+4],r.words[n+5]=this.words[n+5]&t.words[n+5],r.words[n+6]=this.words[n+6]&t.words[n+6],r.words[n+7]=this.words[n+7]&t.words[n+7];for(;n<e;++n)r.words[n]=this.words[n]&t.words[n];return r},A.prototype.equals=function(t){const r=Math.min(this.words.length,t.words.length);for(let e=0;e<r;++e)if(this.words[e]!=t.words[e])return!1;if(this.words.length<t.words.length){const e=t.words.length;for(let n=this.words.length;n<e;++n)if(t.words[n]!=0)return!1}else if(t.words.length<this.words.length){const e=this.words.length;for(let n=t.words.length;n<e;++n)if(this.words[n]!=0)return!1}return!0},A.prototype.difference=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(;e+7<r;e+=8)this.words[e]&=~t.words[e],this.words[e+1]&=~t.words[e+1],this.words[e+2]&=~t.words[e+2],this.words[e+3]&=~t.words[e+3],this.words[e+4]&=~t.words[e+4],this.words[e+5]&=~t.words[e+5],this.words[e+6]&=~t.words[e+6],this.words[e+7]&=~t.words[e+7];for(;e<r;++e)this.words[e]&=~t.words[e];return this},A.prototype.new_difference=function(t){return this.clone().difference(t)},A.prototype.difference2=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(;e+7<r;e+=8)t.words[e]=this.words[e]&~t.words[e],t.words[e+1]=this.words[e+1]&~t.words[e+1],t.words[e+2]=this.words[e+2]&~t.words[e+2],t.words[e+3]=this.words[e+3]&~t.words[e+3],t.words[e+4]=this.words[e+4]&~t.words[e+4],t.words[e+5]=this.words[e+5]&~t.words[e+5],t.words[e+6]=this.words[e+6]&~t.words[e+6],t.words[e+7]=this.words[e+7]&~t.words[e+7];for(;e<r;++e)t.words[e]=this.words[e]&~t.words[e];for(e=this.words.length-1;e>=r;--e)t.words[e]=this.words[e];return t.words.length=this.words.length,t},A.prototype.difference_size=function(t){const r=Math.min(this.words.length,t.words.length);let e=0,n=0;for(;n<r;++n)e+=this.hammingWeight(this.words[n]&~t.words[n]);const o=this.words.length;for(;n<o;++n)e+=this.hammingWeight(this.words[n]);return e},A.prototype.change=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(;e+7<r;e+=8)this.words[e]^=t.words[e],this.words[e+1]^=t.words[e+1],this.words[e+2]^=t.words[e+2],this.words[e+3]^=t.words[e+3],this.words[e+4]^=t.words[e+4],this.words[e+5]^=t.words[e+5],this.words[e+6]^=t.words[e+6],this.words[e+7]^=t.words[e+7];for(;e<r;++e)this.words[e]^=t.words[e];for(e=t.words.length-1;e>=r;--e)this.words[e]=t.words[e];return this},A.prototype.new_change=function(t){const r=Object.create(A.prototype),e=Math.max(this.words.length,t.words.length);r.words=new Array(e);const n=Math.min(this.words.length,t.words.length);let o=0;for(;o+7<n;o+=8)r.words[o]=this.words[o]^t.words[o],r.words[o+1]=this.words[o+1]^t.words[o+1],r.words[o+2]=this.words[o+2]^t.words[o+2],r.words[o+3]=this.words[o+3]^t.words[o+3],r.words[o+4]=this.words[o+4]^t.words[o+4],r.words[o+5]=this.words[o+5]^t.words[o+5],r.words[o+6]=this.words[o+6]^t.words[o+6],r.words[o+7]=this.words[o+7]^t.words[o+7];for(;o<n;++o)r.words[o]=this.words[o]^t.words[o];const a=this.words.length;for(o=n;o<a;++o)r.words[o]=this.words[o];const c=t.words.length;for(o=n;o<c;++o)r.words[o]=t.words[o];return r},A.prototype.change_size=function(t){const r=Math.min(this.words.length,t.words.length);let e=0,n=0;for(;n<r;++n)e+=this.hammingWeight(this.words[n]^t.words[n]);const o=this.words.length>t.words.length?this:t,a=o.words.length;for(;n<a;++n)e+=this.hammingWeight(o.words[n]);return e},A.prototype.toString=function(){return"{"+this.array().join(",")+"}"},A.prototype.union=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(;e+7<r;e+=8)this.words[e]|=t.words[e],this.words[e+1]|=t.words[e+1],this.words[e+2]|=t.words[e+2],this.words[e+3]|=t.words[e+3],this.words[e+4]|=t.words[e+4],this.words[e+5]|=t.words[e+5],this.words[e+6]|=t.words[e+6],this.words[e+7]|=t.words[e+7];for(;e<r;++e)this.words[e]|=t.words[e];if(this.words.length<t.words.length){this.resize((t.words.length<<5)-1);const n=t.words.length;for(let o=r;o<n;++o)this.words[o]=t.words[o]}return this},A.prototype.new_union=function(t){const r=Object.create(A.prototype),e=Math.max(this.words.length,t.words.length);r.words=new Array(e);const n=Math.min(this.words.length,t.words.length);let o=0;for(;o+7<n;o+=8)r.words[o]=this.words[o]|t.words[o],r.words[o+1]=this.words[o+1]|t.words[o+1],r.words[o+2]=this.words[o+2]|t.words[o+2],r.words[o+3]=this.words[o+3]|t.words[o+3],r.words[o+4]=this.words[o+4]|t.words[o+4],r.words[o+5]=this.words[o+5]|t.words[o+5],r.words[o+6]=this.words[o+6]|t.words[o+6],r.words[o+7]=this.words[o+7]|t.words[o+7];for(;o<n;++o)r.words[o]=this.words[o]|t.words[o];const a=this.words.length;for(o=n;o<a;++o)r.words[o]=this.words[o];const c=t.words.length;for(o=n;o<c;++o)r.words[o]=t.words[o];return r},A.prototype.union_size=function(t){const r=Math.min(this.words.length,t.words.length);let e=0;for(let n=0;n<r;++n)e+=this.hammingWeight(this.words[n]|t.words[n]);if(this.words.length<t.words.length){const n=t.words.length;for(let o=this.words.length;o<n;++o)e+=this.hammingWeight(0|t.words[o])}else{const n=this.words.length;for(let o=t.words.length;o<n;++o)e+=this.hammingWeight(0|this.words[o])}return e};var D=A;function oe(){return oe=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},oe.apply(this,arguments)}function qo(t,r){var e=[];return t.forEach(function(n){r.forEach(function(o){e.push(n.concat(o))})}),e}function Ar(t){return!!~t.search(/\(|\)/)}function Qe(t,r){for(var e=r.split(" "+t+" "),n=[],o=[],a=0;a<e.length;a++)if(Ar(e[a])||o.length>0){o.push(e[a]);var c=""+o;(c.match(/\(/g)||[]).length===(c.match(/\)/g)||[]).length&&(n.push(o.join(" "+t+" ")),o=[])}else n.push(e[a]);return n}var Lo=function t(r){return function(n){for(var o=n[0],a=1;a<n.length;a++)o=o.concat(n[a]);return o}(Qe("OR",(e=r=function(n){if(n.charAt(0)==="("){for(var o=0,a=0;a<n.length;a++)if(n.charAt(a)==="("?o++:n.charAt(a)===")"&&o--,o===0)return a!==n.length-1?n:n.substring(1,n.length-1)}return n}(r),r=e.replace(/[\s]+/g," "))).map(function(n){for(var o=Qe("AND",n),a=[],c=[],f=0;f<o.length;f++)Ar(o[f])?a.push(t(o[f])):c.push(o[f]);return a.push([c]),function(d){for(var p=[[]],l=0;l<d.length;l++)p=qo(p,d[l]);return p}(a)}));var e};const Xe=function(t){try{return structuredClone(t)}catch{try{return JSON.parse(JSON.stringify(t))}catch{return t}}},Ze=function(t,r){let e=new D([]),n=0;return E(r,function(o,a){o.forEach(c=>{++n,e=e.new_union(t[a][c]||new D([]))})}),n===0?null:e},Bo=function(t,r,e){let n=1;return E(t.bits_data_temp,(o,a)=>{let c,f,d,p,l,y,g;e[a]&&(c=e[a].order,f=e[a].sort,d=e[a].size,p=e[a].title,l=e[a].show_facet_stats||!1,y=e[a].chosen_filters_on_top!==!1,g=e[a].hide_zero_doc_count||!1);let _,h,v,S,x=Object.entries(o).map(z=>{let V=[];r&&r.filters&&r.filters[a]&&(V=r.filters[a]);const O=z[1].array().length;if(!g||O!==0||V.indexOf(z[0])!==-1)return{key:z[0],doc_count:O,selected:V.indexOf(z[0])!==-1}}).filter(Boolean);var M,W;return $(f)?(_=f||["key"],h=c||["asc"]):(f==="term"||f==="key"?(_=["key"],h=[c||"asc"]):(_=["doc_count","key"],h=[c||"desc","asc"]),y&&(_.unshift("selected"),h.unshift("desc"))),x=de(x,_,h),x=x.slice(0,d||10),l&&(v=[],Object.entries(o).forEach(z=>{if(isNaN(z[0]))throw new Error("You cant use chars to calculate the facet_stats.");z[1].array().length>0&&z[1].forEach(()=>{v.push(parseInt(z[0]))})}),S={min:(M=v,M&&M.length?xr(M,it(void 0),Wo):void 0),max:Co(v),avg:Do(v),sum:Uo(v)}),oe({name:a,title:p||(W=a,W.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,function(z){return z.toUpperCase()})),position:n++,buckets:x},l&&{facet_stats:S})})};function tr(t,r,e,n,o){r=r||Object.create(null);const a=parseInt(r.per_page||12),c=parseInt(r.page||1),f=r.is_all_filtered_items||!1;if(e.native_search_enabled===!1&&(r.query||r.filter))throw new Error('"query" and "filter" options are not working once native search is disabled');let d=0;const p=new Date().getTime();let l,y,g,_=o.bits_ids();if(r._ids)l=new D(r._ids),y=r._ids;else if(r.ids)y=o.internal_ids_from_ids_map(r.ids),l=new D(y);else if(n&&(r.query||r.filter)){const O=new Date().getTime();y=n.search(r.query,r.filter),d=new Date().getTime()-O,l=new D(y)}let h=new Date().getTime();const v=o.search(r,{query_ids:l});h=new Date().getTime()-h,l&&(_=l),v.ids&&(_=_.new_intersection(v.ids)),v.not_ids&&(_=_.new_difference(v.not_ids));let S=_.array(),x=S.map(O=>o.get_item(O)),M=!1;const W=new Date().getTime();let z=0;r.sort?x=function(O,k,q){return q&&q[k]&&(k=q[k]),k.field?de(O,k.field,k.order||"asc"):O}(x,r.sort,e.sortings):y&&(S=y.filter(O=>_.has(O)),x=S.slice((c-1)*a,c*a).map(O=>o.get_item(O)),M=!0),M||(g=f?x:null,x=x.slice((c-1)*a,c*a)),z=new Date().getTime()-W;const V=new Date().getTime()-p;return{pagination:{per_page:a,page:c,total:S.length},timings:{total:V,facets:h,search:d,sorting:z},data:{items:x,allFilteredItems:g,aggregations:Bo(v,r,e.aggregations)}}}var Ft=function(t){var r={exports:{}};return function(e,n){(function(){var o,a,c,f,d,p,l,y,g,_,h,v,S,x,M,W,z,V,O,k,q,L,st,C,R,B,G,Y,u=function(i){var s=new u.Index;return s.pipeline.add(u.trimmer,u.stopWordFilter,u.stemmer),i&&i.call(s,s),s};u.version="1.0.0",u.utils={},u.utils.warn=function(i){return function(s){i.console&&console.warn&&console.warn(s)}}(this),u.utils.asString=function(i){return i==null?"":i.toString()},u.EventEmitter=function(){this.events={}},u.EventEmitter.prototype.addListener=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),w=i;if(typeof s!="function")throw new TypeError("last argument must be a function");w.forEach(function(m){this.hasHandler(m)||(this.events[m]=[]),this.events[m].push(s)},this)},u.EventEmitter.prototype.removeListener=function(i,s){if(this.hasHandler(i)){var w=this.events[i].indexOf(s);this.events[i].splice(w,1),this.events[i].length||delete this.events[i]}},u.EventEmitter.prototype.emit=function(i){if(this.hasHandler(i)){var s=Array.prototype.slice.call(arguments,1);this.events[i].forEach(function(w){w.apply(void 0,s)})}},u.EventEmitter.prototype.hasHandler=function(i){return i in this.events},u.tokenizer=function(i){return arguments.length&&i!=null&&i!=null?Array.isArray(i)?i.map(function(s){return u.utils.asString(s).toLowerCase()}):i.toString().trim().toLowerCase().split(u.tokenizer.separator):[]},u.tokenizer.separator=/[\s\-]+/,u.tokenizer.load=function(i){var s=this.registeredFunctions[i];if(!s)throw new Error("Cannot load un-registered function: "+i);return s},u.tokenizer.label="default",u.tokenizer.registeredFunctions={default:u.tokenizer},u.tokenizer.registerFunction=function(i,s){s in this.registeredFunctions&&u.utils.warn("Overwriting existing tokenizer: "+s),i.label=s,this.registeredFunctions[s]=i},u.Pipeline=function(){this._stack=[]},u.Pipeline.registeredFunctions={},u.Pipeline.registerFunction=function(i,s){s in this.registeredFunctions&&u.utils.warn("Overwriting existing registered function: "+s),i.label=s,u.Pipeline.registeredFunctions[i.label]=i},u.Pipeline.warnIfFunctionNotRegistered=function(i){i.label&&i.label in this.registeredFunctions||u.utils.warn(`Function is not registered with pipeline. This may cause problems when serialising the index.
`,i)},u.Pipeline.load=function(i){var s=new u.Pipeline;return i.forEach(function(w){var m=u.Pipeline.registeredFunctions[w];if(!m)throw new Error("Cannot load un-registered function: "+w);s.add(m)}),s},u.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(i){u.Pipeline.warnIfFunctionNotRegistered(i),this._stack.push(i)},this)},u.Pipeline.prototype.after=function(i,s){u.Pipeline.warnIfFunctionNotRegistered(s);var w=this._stack.indexOf(i);if(w==-1)throw new Error("Cannot find existingFn");this._stack.splice(w+=1,0,s)},u.Pipeline.prototype.before=function(i,s){u.Pipeline.warnIfFunctionNotRegistered(s);var w=this._stack.indexOf(i);if(w==-1)throw new Error("Cannot find existingFn");this._stack.splice(w,0,s)},u.Pipeline.prototype.remove=function(i){var s=this._stack.indexOf(i);s!=-1&&this._stack.splice(s,1)},u.Pipeline.prototype.run=function(i){for(var s=[],w=i.length,m=this._stack.length,b=0;b<w;b++){for(var j=i[b],P=0;P<m&&(j=this._stack[P](j,b,i))!==void 0&&j!=="";P++);j!==void 0&&j!==""&&s.push(j)}return s},u.Pipeline.prototype.reset=function(){this._stack=[]},u.Pipeline.prototype.toJSON=function(){return this._stack.map(function(i){return u.Pipeline.warnIfFunctionNotRegistered(i),i.label})},u.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},u.Vector.Node=function(i,s,w){this.idx=i,this.val=s,this.next=w},u.Vector.prototype.insert=function(i,s){this._magnitude=void 0;var w=this.list;if(!w)return this.list=new u.Vector.Node(i,s,w),this.length++;if(i<w.idx)return this.list=new u.Vector.Node(i,s,w),this.length++;for(var m=w,b=w.next;b!=null;){if(i<b.idx)return m.next=new u.Vector.Node(i,s,b),this.length++;m=b,b=b.next}return m.next=new u.Vector.Node(i,s,b),this.length++},u.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var i,s=this.list,w=0;s;)w+=(i=s.val)*i,s=s.next;return this._magnitude=Math.sqrt(w)},u.Vector.prototype.dot=function(i){for(var s=this.list,w=i.list,m=0;s&&w;)s.idx<w.idx?s=s.next:(s.idx>w.idx||(m+=s.val*w.val,s=s.next),w=w.next);return m},u.Vector.prototype.similarity=function(i){return this.dot(i)/(this.magnitude()*i.magnitude())},u.SortedSet=function(){this.length=0,this.elements=[]},u.SortedSet.load=function(i){var s=new this;return s.elements=i,s.length=i.length,s},u.SortedSet.prototype.add=function(){var i,s;for(i=0;i<arguments.length;i++)~this.indexOf(s=arguments[i])||this.elements.splice(this.locationFor(s),0,s);this.length=this.elements.length},u.SortedSet.prototype.toArray=function(){return this.elements.slice()},u.SortedSet.prototype.map=function(i,s){return this.elements.map(i,s)},u.SortedSet.prototype.forEach=function(i,s){return this.elements.forEach(i,s)},u.SortedSet.prototype.indexOf=function(i){for(var s=0,w=this.elements.length,m=w-s,b=s+Math.floor(m/2),j=this.elements[b];m>1;){if(j===i)return b;j<i&&(s=b),j>i&&(w=b),m=w-s,b=s+Math.floor(m/2),j=this.elements[b]}return j===i?b:-1},u.SortedSet.prototype.locationFor=function(i){for(var s=0,w=this.elements.length,m=w-s,b=s+Math.floor(m/2),j=this.elements[b];m>1;)j<i&&(s=b),j>i&&(w=b),m=w-s,b=s+Math.floor(m/2),j=this.elements[b];return j>i?b:j<i?b+1:void 0},u.SortedSet.prototype.intersect=function(i){for(var s=new u.SortedSet,w=0,m=0,b=this.length,j=i.length,P=this.elements,N=i.elements;!(w>b-1||m>j-1);)P[w]!==N[m]?P[w]<N[m]?w++:P[w]>N[m]&&m++:(s.add(P[w]),w++,m++);return s},u.SortedSet.prototype.clone=function(){var i=new u.SortedSet;return i.elements=this.toArray(),i.length=i.elements.length,i},u.SortedSet.prototype.union=function(i){var s,w,m;this.length>=i.length?(s=this,w=i):(s=i,w=this),m=s.clone();for(var b=0,j=w.toArray();b<j.length;b++)m.add(j[b]);return m},u.SortedSet.prototype.toJSON=function(){return this.toArray()},u.Index=function(){this._fields=[],this._ref="id",this.pipeline=new u.Pipeline,this.documentStore=new u.Store,this.tokenStore=new u.TokenStore,this.corpusTokens=new u.SortedSet,this.eventEmitter=new u.EventEmitter,this.tokenizerFn=u.tokenizer,this._idfCache={},this.on("add","remove","update",(function(){this._idfCache={}}).bind(this))},u.Index.prototype.on=function(){var i=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,i)},u.Index.prototype.off=function(i,s){return this.eventEmitter.removeListener(i,s)},u.Index.load=function(i){i.version!==u.version&&u.utils.warn("version mismatch: current "+u.version+" importing "+i.version);var s=new this;return s._fields=i.fields,s._ref=i.ref,s.tokenizer(u.tokenizer.load(i.tokenizer)),s.documentStore=u.Store.load(i.documentStore),s.tokenStore=u.TokenStore.load(i.tokenStore),s.corpusTokens=u.SortedSet.load(i.corpusTokens),s.pipeline=u.Pipeline.load(i.pipeline),s},u.Index.prototype.field=function(i,s){return this._fields.push({name:i,boost:(s=s||{}).boost||1}),this},u.Index.prototype.ref=function(i){return this._ref=i,this},u.Index.prototype.tokenizer=function(i){return i.label&&i.label in u.tokenizer.registeredFunctions||u.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=i,this},u.Index.prototype.add=function(i,s){var w={},m=new u.SortedSet,b=i[this._ref];s=s===void 0||s,this._fields.forEach(function(Ot){var ut=this.pipeline.run(this.tokenizerFn(i[Ot.name]));w[Ot.name]=ut;for(var lt=0;lt<ut.length;lt++){var kt=ut[lt];m.add(kt),this.corpusTokens.add(kt)}},this),this.documentStore.set(b,m);for(var j=0;j<m.length;j++){for(var P=m.elements[j],N=0,F=0;F<this._fields.length;F++){var at=this._fields[F],xt=w[at.name],gt=xt.length;if(gt){for(var Z=0,ct=0;ct<gt;ct++)xt[ct]===P&&Z++;N+=Z/gt*at.boost}}this.tokenStore.add(P,{ref:b,tf:N})}s&&this.eventEmitter.emit("add",i,this)},u.Index.prototype.remove=function(i,s){var w=i[this._ref];if(s=s===void 0||s,this.documentStore.has(w)){var m=this.documentStore.get(w);this.documentStore.remove(w),m.forEach(function(b){this.tokenStore.remove(b,w)},this),s&&this.eventEmitter.emit("remove",i,this)}},u.Index.prototype.update=function(i,s){s=s===void 0||s,this.remove(i,!1),this.add(i,!1),s&&this.eventEmitter.emit("update",i,this)},u.Index.prototype.idf=function(i){var s="@"+i;if(Object.prototype.hasOwnProperty.call(this._idfCache,s))return this._idfCache[s];var w=this.tokenStore.count(i),m=1;return w>0&&(m=1+Math.log(this.documentStore.length/w)),this._idfCache[s]=m},u.Index.prototype.search=function(i){var s=this.pipeline.run(this.tokenizerFn(i)),w=new u.Vector,m=[],b=this._fields.reduce(function(j,P){return j+P.boost},0);return s.some(function(j){return this.tokenStore.has(j)},this)?(s.forEach(function(j,P,N){var F=1/N.length*this._fields.length*b,at=this,xt=this.tokenStore.expand(j).reduce(function(gt,Z){var ct=at.corpusTokens.indexOf(Z),Ot=at.idf(Z),ut=1,lt=new u.SortedSet;if(Z!==j){var kt=Math.max(3,Z.length-j.length);ut=1/Math.log(kt)}ct>-1&&w.insert(ct,F*Ot*ut);for(var pe=at.tokenStore.get(Z),we=Object.keys(pe),Er=we.length,Vt=0;Vt<Er;Vt++)lt.add(pe[we[Vt]].ref);return gt.union(lt)},new u.SortedSet);m.push(xt)},this),m.reduce(function(j,P){return j.intersect(P)}).map(function(j){return{ref:j,score:w.similarity(this.documentVector(j))}},this).sort(function(j,P){return P.score-j.score})):[]},u.Index.prototype.documentVector=function(i){for(var s=this.documentStore.get(i),w=s.length,m=new u.Vector,b=0;b<w;b++){var j=s.elements[b],P=this.tokenStore.get(j)[i].tf,N=this.idf(j);m.insert(this.corpusTokens.indexOf(j),P*N)}return m},u.Index.prototype.toJSON=function(){return{version:u.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},u.Index.prototype.use=function(i){var s=Array.prototype.slice.call(arguments,1);s.unshift(this),i.apply(this,s)},u.Store=function(){this.store={},this.length=0},u.Store.load=function(i){var s=new this;return s.length=i.length,s.store=Object.keys(i.store).reduce(function(w,m){return w[m]=u.SortedSet.load(i.store[m]),w},{}),s},u.Store.prototype.set=function(i,s){this.has(i)||this.length++,this.store[i]=s},u.Store.prototype.get=function(i){return this.store[i]},u.Store.prototype.has=function(i){return i in this.store},u.Store.prototype.remove=function(i){this.has(i)&&(delete this.store[i],this.length--)},u.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},u.stemmer=(o={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},a={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},p="^("+(f="[^aeiou][^aeiouy]*")+")?"+(d=(c="[aeiouy]")+"[aeiou]*")+f+"("+d+")?$",l="^("+f+")?"+d+f+d+f,y="^("+f+")?"+c,g=new RegExp("^("+f+")?"+d+f),_=new RegExp(l),h=new RegExp(p),v=new RegExp(y),S=/^(.+?)(ss|i)es$/,x=/^(.+?)([^s])s$/,M=/^(.+?)eed$/,W=/^(.+?)(ed|ing)$/,z=/.$/,V=/(at|bl|iz)$/,O=new RegExp("([^aeiouylsz])\\1$"),k=new RegExp("^"+f+c+"[^aeiouwxy]$"),q=/^(.+?[^aeiou])y$/,L=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,st=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,C=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,R=/^(.+?)(s|t)(ion)$/,B=/^(.+?)e$/,G=/ll$/,Y=new RegExp("^"+f+c+"[^aeiouwxy]$"),function(i){var s,w,m,b,j,P,N;if(i.length<3)return i;if((m=i.substr(0,1))=="y"&&(i=m.toUpperCase()+i.substr(1)),j=x,(b=S).test(i)?i=i.replace(b,"$1$2"):j.test(i)&&(i=i.replace(j,"$1$2")),j=W,(b=M).test(i)){var F=b.exec(i);(b=g).test(F[1])&&(i=i.replace(b=z,""))}else j.test(i)&&(F=j.exec(i),(j=v).test(s=F[1])&&(P=O,N=k,(j=V).test(i=s)?i+="e":P.test(i)?i=i.replace(b=z,""):N.test(i)&&(i+="e")));return(b=q).test(i)&&(i=(s=(F=b.exec(i))[1])+"i"),(b=L).test(i)&&(w=(F=b.exec(i))[2],(b=g).test(s=F[1])&&(i=s+o[w])),(b=st).test(i)&&(w=(F=b.exec(i))[2],(b=g).test(s=F[1])&&(i=s+a[w])),j=R,(b=C).test(i)?(F=b.exec(i),(b=_).test(s=F[1])&&(i=s)):j.test(i)&&(F=j.exec(i),(j=_).test(s=F[1]+F[2])&&(i=s)),(b=B).test(i)&&(F=b.exec(i),j=h,P=Y,((b=_).test(s=F[1])||j.test(s)&&!P.test(s))&&(i=s)),j=_,(b=G).test(i)&&j.test(i)&&(i=i.replace(b=z,"")),m=="y"&&(i=m.toLowerCase()+i.substr(1)),i}),u.Pipeline.registerFunction(u.stemmer,"stemmer"),u.generateStopWordFilter=function(i){var s=i.reduce(function(w,m){return w[m]=m,w},{});return function(w){if(w&&s[w]!==w)return w}},u.stopWordFilter=u.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),u.Pipeline.registerFunction(u.stopWordFilter,"stopWordFilter"),u.trimmer=function(i){return i.replace(/^\W+/,"").replace(/\W+$/,"")},u.Pipeline.registerFunction(u.trimmer,"trimmer"),u.TokenStore=function(){this.root={docs:{}},this.length=0},u.TokenStore.load=function(i){var s=new this;return s.root=i.root,s.length=i.length,s},u.TokenStore.prototype.add=function(i,s,w){w=w||this.root;var m=i.charAt(0),b=i.slice(1);return m in w||(w[m]={docs:{}}),b.length===0?(w[m].docs[s.ref]=s,void(this.length+=1)):this.add(b,s,w[m])},u.TokenStore.prototype.has=function(i){if(!i)return!1;for(var s=this.root,w=0;w<i.length;w++){if(!s[i.charAt(w)])return!1;s=s[i.charAt(w)]}return!0},u.TokenStore.prototype.getNode=function(i){if(!i)return{};for(var s=this.root,w=0;w<i.length;w++){if(!s[i.charAt(w)])return{};s=s[i.charAt(w)]}return s},u.TokenStore.prototype.get=function(i,s){return this.getNode(i,s).docs||{}},u.TokenStore.prototype.count=function(i,s){return Object.keys(this.get(i,s)).length},u.TokenStore.prototype.remove=function(i,s){if(i){for(var w=this.root,m=0;m<i.length;m++){if(!(i.charAt(m)in w))return;w=w[i.charAt(m)]}delete w.docs[s]}},u.TokenStore.prototype.expand=function(i,s){var w=this.getNode(i);return s=s||[],Object.keys(w.docs||{}).length&&s.push(i),Object.keys(w).forEach(function(m){m!=="docs"&&s.concat(this.expand(i+m,s))},this),s},u.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},e.exports=u})()}(r),r.exports}();class er{constructor(r,e){this.store=new Map,this.idx=Ft(function(){this.field("name",{boost:10}),((e==null?void 0:e.searchableFields)||[]).forEach(o=>this.field(o)),this.ref("_id"),e!=null&&e.isExactSearch&&(this.pipeline.remove(Ft.stemmer),this.pipeline.remove(Ft.stopWordFilter)),e!=null&&e.removeStopWordFilter&&this.pipeline.remove(Ft.stopWordFilter)});let n=1;(r||[]).map(o=>{o._id=n,++n,this.idx.add(o),this.store.set(o._id,o)})}search_full(r,e){return this.search(r,e).map(n=>this.store.get(n))}search(r,e){return e instanceof Function?(r?this.idx.search(r).map(n=>this.store.get(n.ref)):[...this.store.values()]).filter(e).map(n=>n._id):r?this.idx.search(r).map(n=>n.ref):[...this.store.keys()]}}class rr{constructor(r,e){(e=e||Object.create(null)).aggregations=e.aggregations||Object.create(null),this._items=r,this.config=e.aggregations,this.facets=function(c,f){f=f||[];const d={data:Object.create(null),bits_data:Object.create(null),bits_data_temp:Object.create(null)};let p=1;return f.forEach(l=>{d.data[l]=Object.create(null)}),c&&c.map(l=>(l._id||(l._id=p,++p),l)),c&&c.map(l=>(f.forEach(y=>{if(l){if(Array.isArray(l[y]))l[y].forEach(g=>{l[y]&&(d.data[y][g]||(d.data[y][g]=[]),d.data[y][g].push(parseInt(l._id)))});else if(l[y]!==void 0){const g=l[y];d.data[y][g]||(d.data[y][g]=[]),d.data[y][g].push(parseInt(l._id))}}}),l)),d.data=E(d.data,function(l,y){return d.bits_data[y]||(d.bits_data[y]=Object.create(null),d.bits_data_temp[y]=Object.create(null)),E(l,function(g,_){const h=Ro(g);return d.bits_data[y][_]=new D(h),h})}),d}(r,St(e.aggregations)),this._items_map=Object.create(null),this._ids=[];let n=1;var o,a;a=c=>{this._ids.push(n),this._items_map[n]=c,c._id=n,++n},($(o=r)?ht:Sr)(o,it(a)),this.ids_map=Object.create(null),r&&r.forEach(c=>{const f=e.custom_id_field||"id";c[f]&&c._id&&(this.ids_map[c[f]]=c._id)}),this._bits_ids=new D(this._ids)}items(){return this._items}bits_ids(r){return r?new D(r):this._bits_ids}internal_ids_from_ids_map(r){return r.map(e=>this.ids_map[e])}index(){return this.facets}get_item(r){return this._items_map[r]}search(r,e){const n=this.config;e=e||Object.create(null);const o=Ht(this.facets);let a;o.not_ids=Ze(o.bits_data,r.not_filters);const c=function(f,d){const p=[];return E(f.filters,function(l,y){if(l&&l.length)if(d[y].conjunction!==!1)E(l,function(g){p.push([y,g])});else{const g=[];E(l,function(_){g.push([y,_])}),p.push(g)}}),E(f.not_filters,function(l,y){l&&l.length&&E(l,function(g){p.push([y,"-",g])})}),p}(r,n);return a=function(f,d){const p=Ht(f);let l;d=d||[],E(p.bits_data,function(g,_){E(p.bits_data[_],function(h,v){p.bits_data_temp[_][v]=p.bits_data[_][v]})}),p.is_temp_copied=!0;const y=function(g,_){const h=Object.create(null);return E(_,function(v){if(Array.isArray(v[0])){let S=new D([]);E(v,function(x){const M=x[0];S=S.new_union(g.bits_data[M][x[1]]||new D([])),h[M]=S})}}),h}(f,d);return E(d,function(g){if(!Array.isArray(g[0])){const _=g[0],h=g[1];l=l&&p.bits_data_temp[_][h]?p.bits_data_temp[_][h].new_intersection(l):l&&!p.bits_data_temp[_][h]?new D([]):p.bits_data_temp[_][h]}}),l&&E(p.bits_data_temp,function(g,_){E(p.bits_data_temp[_],function(h,v){p.bits_data_temp[_][v]=p.bits_data_temp[_][v].new_intersection(l)})}),E(d,function(g){if(g.length===3&&g[1]==="-"){const _=p.bits_data_temp[g[0]][g[2]].clone();E(p.bits_data_temp,function(h,v){E(p.bits_data_temp[v],function(S,x){p.bits_data_temp[v][x]=p.bits_data_temp[v][x].new_difference(_)})})}}),E(p.bits_data_temp,function(g,_){E(p.bits_data_temp[_],function(h,v){E(y,function(S,x){x!==_&&(p.bits_data_temp[_][v]=p.bits_data_temp[_][v].new_intersection(S))})})}),p}(this.facets,c),r.filters_query&&(a=function(f,d){const p=Ht(f);p.is_temp_copied||E(p.bits_data,function(y,g){E(p.bits_data[g],function(_,h){p.bits_data_temp[g][h]=p.bits_data[g][h]})});let l=null;return E(d,function(y){let g=null;E(y,function(_){const h=_[0],v=_[1];if(!p.bits_data_temp[h])throw new Error("Panic. The key does not exist in facets lists.");g=g&&p.bits_data_temp[h][v]?p.bits_data_temp[h][v].new_intersection(g):g&&!p.bits_data_temp[h][v]?new D([]):p.bits_data_temp[h][v]}),l=(l||new D([])).new_union(g||new D([]))}),l!==null&&E(p.bits_data_temp,function(y,g){E(p.bits_data_temp[g],function(_,h){p.bits_data_temp[g][h]=p.bits_data_temp[g][h].new_intersection(l)})}),p}(a,Lo(r.filters_query).map(f=>Array.isArray(f)?f.map(d=>Array.isArray(d)?d.map(p=>p):d.split(":")):f.split(":")))),o.bits_data_temp=a.bits_data_temp,E(o.bits_data_temp,function(f,d){E(o.bits_data_temp[d],function(p,l){e.query_ids&&(o.bits_data_temp[d][l]=e.query_ids.new_intersection(o.bits_data_temp[d][l])),e.test&&(o.data[d][l]=o.bits_data_temp[d][l].array())})}),o.ids=r.filters_query?function(f){let d=new D([]);return E(f,function(p,l){E(f[l],function(y,g){d=d.new_union(f[l][g])})}),d}(o.bits_data_temp):Ze(o.bits_data_temp,r.filters),o}}function Jo(t,r){let e;(r=r||Object.create(null)).native_search_enabled!==!1&&(e=new er(t,r));let n=new rr(t,r);return{search:function(o){return(o=o||Object.create(null)).aggregations=function(a,c){return E(Xe(a),(f,d)=>{f.field||(f.field=d);let p=[];c.filters&&c.filters[d]&&(p=c.filters[d]),f.filters=p;let l=[];return c.not_filters&&c.not_filters[d]&&(l=c.not_filters[d]),c.exclude_filters&&c.exclude_filters[d]&&(l=c.exclude_filters[d]),f.not_filters=l,f})}(r.aggregations,o),tr(0,o,r,e,n)},similar:function(o,a){return function(c,f,d){const p=d.per_page||10,l=d.minimum||0,y=d.page||1;let g;for(let v=0;v<c.length;++v)if(c[v].id==f){g=c[v];break}if(!d.field)throw new Error("Please define field in options");const _=d.field;let h=[];for(let v=0;v<c.length;++v)if(c[v].id!==f){const S=$o(g[_],c[v][_]);S.length>=l&&(h.push(c[v]),h[h.length-1].intersection_length=S.length)}return h=de(h,["intersection_length"],["desc"]),{pagination:{per_page:p,page:y,total:h.length},data:{items:h.slice((y-1)*p,y*p)}}}(t,o,a)},aggregation:function(o){return function(a,c,f,d,p){const l=c.per_page||10,y=c.page||1;if(c.name&&(!f.aggregations||!f.aggregations[c.name]))throw new Error('Please define aggregation "'.concat(c.name,'" in config'));const g=Xe(c);if(g.page=1,g.per_page=0,!c.name)throw new Error("field name is required");f.aggregations[c.name].size=1e4;const _=tr(0,g,f,d,p).data.aggregations[c.name].buckets;return{pagination:{per_page:l,page:y,total:_.length},data:{buckets:_.slice((y-1)*l,y*l)}}}(0,o,r,e,n)},reindex:function(o){e=new er(t=o,r),n=new rr(t,r)}}}export{Jo as J};
