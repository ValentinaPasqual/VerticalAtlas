import"./modulepreload-polyfill-B5Qt9EMX.js";import{l as h,i as z,p as f}from"./dataParser-Db8dEQbq.js";function g(n){const t=n.filter(i=>i.in_evidence===!0);if(t.length===0)return null;const e=document.createElement("div");e.className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12";const a=document.createElement("h2");a.className="text-3xl font-bold text-gray-900 mb-8",a.textContent="Luoghi d'interesse",e.appendChild(a);const r=document.createElement("div");return r.className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",e.appendChild(r),t.forEach(i=>{const c=document.createElement("div");c.className="bg-white rounded-lg overflow-hidden shadow-lg border border-gray-200 card-hover transition duration-300";const o=document.createElement("div");o.className="h-48 overflow-hidden";const d=document.createElement("div");d.className="p-6";const l=document.createElement("div");l.className="flex justify-between items-center mb-2";const s=document.createElement("h3");s.className="text-xl font-bold",s.textContent=i.Name||"Luogo senza nome";const m=document.createElement("span");m.className="text-sm bg-indigo-100 text-indigo-800 px-2 py-1 rounded",m.textContent=i.Date||"",l.appendChild(s),i.Date&&l.appendChild(m),d.appendChild(l);const p=document.createElement("p");p.className="text-gray-600 mb-4",p.textContent=i.in_evidence_description||"",d.appendChild(p);const u=document.createElement("a");u.href=`#${i.id||""}`,u.className="text-indigo-600 font-medium hover:text-indigo-800 inline-flex items-center",d.appendChild(u),c.appendChild(d),r.appendChild(c)}),e}async function v(){try{const n="map";let t=document.getElementById(n);const e=await h();e.map||(console.warn("Configurazione della mappa mancante, utilizzo configurazione predefinita"),e.map={initialView:[45.9763,7.6586],initialZoom:8,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map.containerId=n,console.log(`Inizializzazione mappa con container ID: "${n}"`);const a=z(e),r=a.map,i=a.markers,c=a.renderMarkers;try{const o=await f();o&&Array.isArray(o)?(console.log(`Aggiunti ${o.length} punti alla mappa`),c&&typeof c=="function"?c(o):console.warn("La funzione renderMarkers non è disponibile"),window.alpinismData=o):console.warn("Nessun dato valido trovato o formato dati non valido")}catch(o){console.error("Errore durante il caricamento o l'analisi dei dati:",o)}console.log("Mappa inizializzata con successo")}catch(n){console.error("Errore durante l'inizializzazione della mappa:",n);const t=document.querySelector(".map-container")||document.body,e=document.createElement("div");e.className="error-message p-4 bg-red-100 text-red-700 border border-red-300 rounded",e.textContent="Si è verificato un errore durante il caricamento della mappa. Ricarica la pagina per riprovare.",t.appendChild(e)}}async function C(){try{if(window.alpinismData){const n=window.alpinismData,t=document.getElementById("featured-locations-container");if(t){const e=g(n);e?(t.appendChild(e),console.log('Sezione "In evidenza sulla mappa" generata con successo')):console.log("Nessun elemento in evidenza trovato nei dati")}else{console.warn("Container per le località in evidenza non trovato (ID: featured-locations-container)");const e=document.querySelector(".map-container");if(e){const a=document.createElement("div");a.id="featured-locations-container",e.parentNode.insertBefore(a,e.nextSibling);const r=g(n);r&&(a.appendChild(r),console.log('Sezione "In evidenza sulla mappa" generata e inserita automaticamente'))}}}else try{const n=await f();if(n&&Array.isArray(n)){window.alpinismData=n;const t=document.getElementById("featured-locations-container");if(t){const e=g(n);e&&(t.appendChild(e),console.log('Sezione "In evidenza sulla mappa" generata con successo'))}}}catch(n){console.error("Errore durante il caricamento dei dati per le località in evidenza:",n)}}catch(n){console.error("Errore durante l'inizializzazione delle località in evidenza:",n)}}document.addEventListener("DOMContentLoaded",()=>{v(),C()});
